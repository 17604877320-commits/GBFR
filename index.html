<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GBFR å…¨è§’è‰²å› å­å¯¹ç…§ - @ç«‹å¤</title>
    <style>
        :root { --gold: #d4af37; --brown: #5d4037; --coffee: #eaddca; --bg: #fdfaf5; --green: #27ae60; --red: #e74c3c; }
        body { font-family: sans-serif; background: var(--coffee); margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; }
        .main-layout { display: flex; gap: 15px; width: 100%; max-width: 1200px; align-items: flex-start; }
        .left-panel { flex: 1.2; position: sticky; top: 10px; display: flex; flex-direction: column; gap: 15px; }
        .target-box { background: var(--brown); color: #fff; padding: 15px; border-radius: 12px; }
        .panel-title { margin: 0 0 10px 0; border-bottom: 2px solid var(--gold); padding-bottom: 5px; color: var(--gold); }
        .target-item { display: flex; justify-content: space-between; padding: 8px 12px; font-size: 13px; margin-bottom: 4px; border-radius: 6px; background: rgba(255,255,255,0.05); color: #ccc; }
        .status-over { background-color: var(--red) !important; color: white !important; font-weight: bold; }
        .status-met { background-color: var(--green) !important; color: white !important; }
        .right-panel { flex: 2; background: var(--bg); padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .input-group { background: #fff; border: 1px solid #ddd; padding: 12px; border-radius: 10px; margin-bottom: 12px; }
        .bless-group { border: 2px solid var(--gold); background: #fffdf0; }
        .input-row { display: flex; gap: 8px; align-items: center; margin-top: 8px; }
        select { flex: 2; padding: 8px; border-radius: 6px; border: 1px solid #ccc; background: white; }
        .lv-input { width: 60px; padding: 8px; border-radius: 6px; border: 1px solid #ccc; text-align: center; }
        .top-ctrl { background: var(--brown); color: var(--gold); padding: 15px; border-radius: 10px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; font-weight: bold; }
        button { width: 100%; padding: 12px; background: #c0392b; color: #fff; border: none; border-radius: 8px; cursor: pointer; }
        @media (max-width: 850px) { .main-layout { flex-direction: column; } .left-panel { position: static; width: 100%; } }
    </style>
</head>
<body>
    <div style="text-align:center; margin-bottom:15px;">
        <h2 style="margin:0; color:var(--brown);">GBFR å…¨è§’è‰²å› å­å¯¹ç…§ä¸­å¿ƒ</h2>
        <small>Author: @ç«‹å¤ | æ•°æ®åŒæ­¥: 2026-02-09</small>
    </div>

    <div class="main-layout">
        <div class="left-panel">
            <div class="target-box"><h4 class="panel-title">æ­¦å™¨ç¥ç¦ç›®æ ‡</h4><div id="blessTargetDisplay"></div></div>
            <div class="target-box"><h4 class="panel-title">è§’è‰²å› å­ç›®æ ‡</h4><div id="factorTargetDisplay"></div></div>
        </div>

        <div class="right-panel">
            <div class="top-ctrl">
                <div>è§’è‰²ï¼š<select id="roleSelector" onchange="switchRole()" style="background:white; border-radius:5px; padding:5px;"></select></div>
                <div><input type="checkbox" id="bahamutCheck" onchange="render()"> <label for="bahamutCheck">å·´æ­¦å…¨è§‰é†’</label></div>
            </div>
            <div class="input-group bless-group"><div style="font-weight:bold; color:var(--brown);">ğŸ’ æ­¦å™¨ç¥ç¦</div><div id="blessInputs"></div></div>
            <div id="factorInputs"></div>
            <button onclick="resetData()">é‡ç½®å½“å‰é…è£…</button>
        </div>
    </div>

    <script>
        const roleData = {
            "1æ³½å¡”": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æ€’æ¶›":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æ¿€æ˜‚","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","å¥‹ä¸é¡¾èº«","æ˜é•œæ­¢æ°´","èº²é¿æ€§èƒ½","è‡ªåŠ¨å¤æ´»","çƒˆç„°","ç¿”èˆ","æˆ˜æ°”","è¿…æ·èƒ½åŠ›","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "2å¡çˆ·": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"å¥‹ä¸é¡¾èº«":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","èƒ½åŠ›ä¼¤å®³","æ˜é•œæ­¢æ°´","èº²é¿æ€§èƒ½","è‡ªåŠ¨å¤æ´»","çœŸç†","è¿…æ·èƒ½åŠ›","æˆ˜æ°”","è¿…æ·èƒ½åŠ›","ç§˜çº¹Î²","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î²","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "3é½æ ¼é£": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æ¿€æ˜‚","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","èº²é¿æ€§èƒ½","è‡ªåŠ¨å¤æ´»","æš´å‡»","æ˜é•œæ­¢æ°´","(è¿…æ·)","(è±ªèƒ†)","æˆ˜æ°”","æ˜é•œæ­¢æ°´","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "4è²è‰": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æ¿€æ˜‚","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","èº²é¿æ€§èƒ½","è‡ªåŠ¨å¤æ´»","è¿å‡»åŠ æˆ","æš´å‡»","èº²é¿è·ç¦»","æ˜é•œæ­¢æ°´","æˆ˜æ°”","è¿…æ·èƒ½åŠ›","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "5å§¬å¡”": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æ¿€æ˜‚","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","èº²é¿æ€§èƒ½","è‡ªåŠ¨å¤æ´»","æš´å‡»","æ˜é•œæ­¢æ°´","è‹±å‹‡ç¥é€Ÿ","æ€’æ¶›","è‹±å‹‡ä¹‹å¿ƒ","è¿…æ·èƒ½åŠ›","ç§˜çº¹Î²","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î²","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "6å¤æ´›ç‰¹": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æ¿€æ˜‚","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","è¿å‡»åŠ æˆ","è‡ªåŠ¨å¤æ´»","å¼±ç‚¹æ”»å‡»","è¿å‡»æ”¶æ‹›","å¨å…‰","æš´å‡»","æˆ˜æ°”","æ˜é•œæ­¢æ°´","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "7å¥¶åˆ€": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æ˜é•œæ­¢æ°´","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","å¥‹/å¿«è“„","è‡ªåŠ¨å¤æ´»","èƒ½åŠ›ä¼¤å®³","æš´å‡»","æ¢¦å¹»","æ­¦è‰º","æˆ˜æ°”","èº²é¿æ€§èƒ½","ä¼¤å®³ä¸Šé™","è¿…æ·èƒ½åŠ›","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "8ä¼Šæ¬§": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"è“„åŠ›ä¼šå¿ƒ":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","å¿«é€Ÿè“„åŠ›","èº²é¿æ€§èƒ½","èº²é¿è·ç¦»","è‡ªåŠ¨å¤æ´»","å¿ƒæ„¿","ä¼¶ä¿","æˆ˜æ°”","æ€’æ¶›","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "9ç´¢æ©": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æ€’æ¶›":10}, factors:["äºŒç‹","+","çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","å¿«é€Ÿè“„åŠ›","æš´å‡»","æš´å›","èº²é¿æ€§èƒ½","ä¸‡ç®­","å‡›å†½","æˆ˜æ°”","æ¿€æ˜‚/éšåŒ¿","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "10ä¼Šå¾·": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æš´å‡»","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","æš´å‡»","è±ªèƒ†","èº²é¿æ€§èƒ½","è‡ªåŠ¨å¤æ´»","å¼‚èƒ½æˆ˜æ„","å¼‚èƒ½å¢é•¿","å¼‚èƒ½ä¹‹å¿ƒ","æ˜é•œæ­¢æ°´","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "11è€ä¸ƒ": { bless:{"æ˜å¥":20,"è¯æ°´":15,"æ€’æ¶›":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","æ˜é•œæ­¢æ°´","è¿½å‡»","è¿½å‡»","è¿å‡»åŠ æˆ","æš´å›","ä¸ƒæ˜Ÿ","+","èº²é¿æ€§èƒ½","è‡ªåŠ¨å¤æ´»","é—ªåˆƒ","æš´å‡»","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "12å¡å§": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æ¿€æ˜‚","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","æš´å‡»","å¼±ç‚¹æ”»å‡»","èƒ½åŠ›ä¼¤å®³","è‡ªåŠ¨å¤æ´»","å†³å¿ƒ","éª„å‚²","å¥‹ä¸é¡¾èº«","æ˜é•œæ­¢æ°´","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "13ç‚å¸": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","æš´å‡»","å¥‹ä¸é¡¾èº«/æ€’æ¶›","å¿«é€Ÿè“„åŠ›","è‡ªåŠ¨å¤æ´»","ç‹è€…è¿›è¡Œ","èº²é¿æ€§èƒ½","ç‹è€…æˆ˜æ°”","æ˜é•œæ­¢æ°´","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "14èèµ›å¡”": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","è¿½å‡»","è±ªèƒ†/è‡ªæ´»","æš´å‡»","è¿…æ·èƒ½åŠ›","æš´å‡»","è‡ªåŠ¨å¤æ´»","ç«ç‘°æ—©ç»½","èº²é¿æ€§èƒ½","ç«ç‘°æˆ˜æ°”","æ˜é•œæ­¢æ°´","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "15å…°æ–¯": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æ¿€æ˜‚","æ‘‡æ›³æ­¥","è¯æ°´","è¿½å‡»","è¿½å‡»","æš´å‡»","è‡ªåŠ¨å¤æ´»","è¿å‡»åŠ æˆ","è¿…æ·èƒ½åŠ›","åˆ€ä¸Šèˆ","è¿…æ·èƒ½åŠ›","ç™½é¾™æˆ˜æ°”","æ˜é•œæ­¢æ°´","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "16æ°´è€å¤´": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","æš´å‡»","è‡ªåŠ¨å¤æ´»","æš´å‡»","è¿…æ·èƒ½åŠ›","èƒ½åŠ›ä¼¤å®³","æ€’æ¶›","å¦–å‰‘å£«","èº²é¿æ€§èƒ½","æˆ˜æ°”","æ˜é•œæ­¢æ°´","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "17åœ£å¾·èŠ¬": { bless:{"æ˜å¥":20,"æš´å‡»":15,"è‡ªæ´»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","è¿å‡»åŠ æˆ","æš´å›/åˆ€èˆ","é›†ä¸­ç‚®ç«","åœ£ä¸å±ˆèº«/æš´ä¼¤","æ— æ™","+","æˆ˜æ°”","æ˜é•œæ­¢æ°´","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±/æ ¼æŒ¡/éšåŒ¿","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "18å·´å”": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"è“„åŠ›ä¼šå¿ƒ":10}, factors:["èƒŒæ°´","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","å¥‹ä¸é¡¾èº«","è“„åŠ›æ”»å‡»","å¿«é€Ÿè“„åŠ›","æš´å‡»ä¼¤å®³","å¹½å†¥è‡ªè‹¥","æ˜é•œæ­¢æ°´","æˆ˜æ°”","èº²é¿æ€§èƒ½","ä¼¤å®³ä¸Šé™","è±ªèƒ†","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "19æ¬§æ ¹": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","å¿«é€Ÿè“„åŠ›","å¿«è“„/ç‚®ç«/åˆ€ä¸Šèˆ","å¤©çœ¼","æ˜é•œæ­¢æ°´","æˆ˜æ°”","èº²é¿æ€§èƒ½","ç§˜çº¹Î²","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "20å·´æ©": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","æ¿€æ˜‚","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","è¿å‡»åŠ æˆ","è¿å‡»æ”¶æ‹›","å¼±ç‚¹æ”»å‡»","å¥‹ä¸é¡¾èº«/æš´ä¼¤","æ¯…åŠ›","æš´å‡»","æˆ˜æ°”","èº²é¿æ€§èƒ½","ä¼¤å®³ä¸Šé™","è‡ªåŠ¨å¤æ´»","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "21æ‹‰å¡å§†": { bless:{"æ˜å¥":20,"è¿½å‡»":15,"æš´å‡»":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","å¿«é€Ÿè“„åŠ›","æ˜é•œæ­¢æ°´","æš´å‡»","éšåŒ¿/æ¿€æ˜‚","æŒ‡å¼•","åšæŒ","æˆ˜æ°”","èº²é¿æ€§èƒ½","ä¼¤å®³ä¸Šé™","è‡ªåŠ¨å¤æ´»","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] },
            "22ç‰›çˆ·çˆ·": { bless:{"å¼±ç‚¹":20,"è¿½å‡»":15,"è“„åŠ›ä¼šå¿ƒ":10}, factors:["çƒ­è¡€","æš´å›","å±è½¬","è¿…æ·èƒ½åŠ›","ç‹‚æˆ˜å£«","è¯æ°´","è¿½å‡»","è¿½å‡»","å¥‹ä¸é¡¾èº«","è“„åŠ›æ”»å‡»","æš´å‡»ä¼¤å®³","è‡ªåŠ¨å¤æ´»","å¼ºè€…","æ˜é•œæ­¢æ°´","æˆ˜æ°”","èº²é¿æ€§èƒ½","ç§˜çº¹Î±/ç®¡åŸ","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î±","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™","ç§˜çº¹Î³","ä¼¤å®³ä¸Šé™"] }
        };

        const hardCaps = { "ä¼¤å®³ä¸Šé™": 65, "çƒ­è¡€": 45, "æš´å›": 45, "æ¿€æ˜‚": 45, "è¿…æ·èƒ½åŠ›": 45, "æ€’æ¶›": 20, "è¿½å‡»": 45, "å±è½¬": 15, "è¯æ°´": 15, "æ˜å¥": 50, "ç‹‚æˆ˜å£«": 15, "å¥‹ä¸é¡¾èº«": 15, "æ˜é•œæ­¢æ°´": 15, "èº²é¿æ€§èƒ½": 15, "è‡ªåŠ¨å¤æ´»": 15, "çƒˆç„°": 15, "ç¿”èˆ": 15, "æˆ˜æ°”": 15, "ç§˜çº¹Î±": 30, "ç§˜çº¹Î³": 30, "è¿…æ·": 15, "æš´å‡»": 50, "èƒ½åŠ›ä¼¤å®³": 30, "çœŸç†": 15, "è¿å‡»åŠ æˆ": 30, "è¿å‡»æ”¶æ‹›": 15, "å¼±ç‚¹æ”»å‡»": 30, "å¨å…‰": 15, "å¿«é€Ÿè“„åŠ›": 30, "å¿ƒæ„¿": 15, "ä¼¶ä¿": 15, "å¼‚èƒ½æˆ˜æ„": 15, "å¼‚èƒ½å¢é•¿": 15, "å¼‚èƒ½ä¹‹å¿ƒ": 15, "å†³å¿ƒ": 15, "éª„å‚²": 15, "ç‹è€…è¿›è¡Œ": 15, "ç‹è€…æˆ˜æ°”": 15, "ç«ç‘°æ—©ç»½": 15, "ç«ç‘°æˆ˜æ°”": 15, "åˆ€ä¸Šèˆ": 15, "ç™½é¾™æˆ˜æ°”": 15, "å¦–å‰‘å£«": 15, "é›†ä¸­ç‚®ç«": 15, "èƒŒæ°´": 45, "å¹½å†¥è‡ªè‹¥": 15, "å¤©çœ¼": 15, "æ¯…åŠ›": 15, "æŒ‡å¼•": 15, "åšæŒ": 15, "å¼ºè€…": 15 };
        
        let currentRoleKey = "1æ³½å¡”";
        let blessData = Array(3).fill(null).map(() => ({attr: "ç©ºç¼º", lv: 0}));
        let factorData = Array(12).fill(null).map(() => ({main: "ç©ºç¼º", sub: "ç©ºç¼º", lv: 15}));

        function init() {
            const sel = document.getElementById('roleSelector');
            Object.keys(roleData).forEach(k => sel.options.add(new Option(k, k)));
            switchRole();
        }

        function switchRole() {
            currentRoleKey = document.getElementById('roleSelector').value;
            render();
        }

        function render() {
            const data = roleData[currentRoleKey];
            const isBahamut = document.getElementById('bahamutCheck').checked;
            const currentStats = {};

            blessData.forEach(d => { if(d.attr !== "ç©ºç¼º") currentStats[d.attr] = (currentStats[d.attr] || 0) + d.lv; });
            factorData.forEach(d => {
                if(d.main !== "ç©ºç¼º") currentStats[d.main] = (currentStats[d.main] || 0) + d.lv;
                if(d.sub !== "ç©ºç¼º") currentStats[d.sub] = (currentStats[d.sub] || 0) + d.lv;
            });

            if (isBahamut) { Object.keys(currentStats).forEach(a => { if(currentStats[a]>0) currentStats[a]+=1; }); }

            // æ­¦å™¨ç¥ç¦çœ‹æ¿ (ä»…ç®—ç¥ç¦ä½)
            document.getElementById('blessTargetDisplay').innerHTML = Object.keys(data.bless).map(attr => {
                const bLv = blessData.reduce((acc, c) => c.attr === attr ? acc + c.lv : acc, 0);
                const cls = bLv >= data.bless[attr] ? "status-met" : "";
                return `<div class="target-item ${cls}"><span>${attr}</span><span>${bLv}/${data.bless[attr]}</span></div>`;
            }).join('');

            // å› å­ç›®æ ‡çœ‹æ¿ (åŸºç¡€ç­‰çº§åˆ¤å®šæº¢å‡º)
            const fT = {};
            data.factors.forEach(f => { fT[f] = (fT[f] || 0) + 15; });
            document.getElementById('factorTargetDisplay').innerHTML = Object.keys(fT).map(attr => {
                const cur = currentStats[attr] || 0;
                const cap = hardCaps[attr] || 15;
                const base = cur - (isBahamut && cur>0 ? 1 : 0);
                let cls = base > cap ? "status-over" : (cur > 0 ? "status-met" : "");
                return `<div class="target-item ${cls}"><span>${attr}</span><span>${cur}/${fT[attr]}</span></div>`;
            }).join('');

            // å³ä¾§é€‰é¡¹æ± 
            const pool = ["ç©ºç¼º", ...new Set([...data.factors, ...Object.keys(data.bless)])];
            document.getElementById('blessInputs').innerHTML = blessData.map((d, i) => `
                <div class="input-row">
                    <select onchange="update('bless', ${i}, 'attr', this.value)">${pool.map(a => `<option value="${a}" ${d.attr===a?'selected':''}>${a}</option>`).join('')}</select>
                    <input type="number" class="lv-input" value="${d.lv}" oninput="update('bless', ${i}, 'lv', parseInt(this.value)||0)">
                </div>`).join('');

            document.getElementById('factorInputs').innerHTML = factorData.map((d, i) => `
                <div class="input-group">
                    <div style="font-weight:bold; font-size:12px; color:var(--brown);">å› å­ä½ ${i+1}</div>
                    <div class="input-row">
                        <select onchange="update('factor', ${i}, 'main', this.value)">${pool.map(a => `<option value="${a}" ${d.main===a?'selected':''}>${a}</option>`).join('')}</select>
                        <select onchange="update('factor', ${i}, 'sub', this.value)">${pool.map(a => `<option value="${a}" ${d.sub===a?'selected':''}>${a}</option>`).join('')}</select>
                        <input type="number" class="lv-input" value="${d.lv}" oninput="update('factor', ${i}, 'lv', parseInt(this.value)||0)">
                    </div>
                </div>`).join('');
        }

        function update(type, i, field, val) {
            if(type === 'bless') blessData[i][field] = val;
            else factorData[i][field] = val;
            render();
        }

        function resetData() { blessData = Array(3).fill(null).map(() => ({attr: "ç©ºç¼º", lv: 0})); factorData = Array(12).fill(null).map(() => ({main: "ç©ºç¼º", sub: "ç©ºç¼º", lv: 15})); render(); }
        init();
    </script>
</body>
</html>
